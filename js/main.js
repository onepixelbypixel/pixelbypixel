const px=new pixelbypixel({from:document.getElementById("pixelbypixelimg"),});let paletteList=[[[0,0,0],[255,255,255],],[[0,0,0],[255,255,255],[255,218,69],],[[170,205,242],[225,233,242],[69,67,67],],[[161,152,152],[244,234,234],[69,67,67],],[[0,0,0],[255,255,255],[255,218,69],[73,231,236],],[[155,188,15],[139,172,15],[48,98,48],[15,56,15],],[[171,171,171],[117,113,113],[69,67,67],[34,33,33],[0,0,0],],[[195,194,203],[69,67,67],[47,47,48],[53,41,247],[19,12,136],],[[69,67,67],[161,218,199],[255,200,198],[232,201,140],[243,243,243],],[[26,25,25],[69,67,67],[81,166,157],[96,219,168],[255,204,133],],[[63,66,56],[115,48,48],[69,67,67],[150,150,150],[191,189,189],],[[20,20,20],[69,67,67],[107,102,102],[140,133,133],[191,180,180],],[[105,210,231],[167,219,216],[224,228,204],[243,134,48],[250,105,0],],[[254,67,101],[252,157,154],[249,205,173],[200,200,169],[131,175,155],],[[236,208,120],[217,91,67],[192,41,66],[84,36,55],[83,119,122],],[[124,124,124],[0,0,252],[0,0,196],[64,40,196],[148,0,140],[172,0,140],[172,16,0],[140,24,0],[80,48,0],[0,120,0],[0,104,0],[0,88,0],[0,64,88],[0,0,0],],[[26,28,44],[93,39,93],[177,62,83],[239,125,87],[255,205,117],[167,240,112],[56,183,100],[37,113,121],[41,54,111],[59,93,201],[65,166,246],[115,239,247],[244,244,244],[148,176,194],[86,108,134],[51,60,87],],[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[192,192,192],[128,128,128],[255,0,0],[0,255,0],[255,255,0],[0,0,255],[255,0,255],[0,255,255],[255,255,255],],];let currentPalette=0;document.addEventListener("DOMContentLoaded",function(){document.getElementById("imageInput").onchange=function(e){let img=new Image();img.src=URL.createObjectURL(this.files[0]);img.onload=()=>{px.sFIS(img.src);pixelbypixel();};};const pixelbypixel=()=>{document.querySelector(".loader").classList.toggle("active");setTimeout(()=>{document.querySelector(".loader").classList.toggle("active");},800);px.sS(pxPerSq.value).sP(paletteList[currentPalette]).draw().p().iC();greyscale.checked?px.cGS():null;lineart.checked?px.cLA():null;palette.checked?px.cP():null;};const mPG=()=>{document.querySelector("#palettecolor").innerHTML="";paletteList=[...paletteList];paletteList.forEach((palette,i)=>{const option=document.createElement("option");option.value=i;palette.forEach((elem)=>{let div=document.createElement("div");div.classList="colorblock";div.style.backgroundColor=`rgba(${elem[0]},${elem[1]},${elem[2]},1)`;option.appendChild(div);});document.getElementById("paletteselector").appendChild(option);});};mPG();new SlimSelect({hideSelectedOption:true,showSearch:false,select:"#paletteselector",onChange:(info)=>{currentPalette=info.value;palette.checked=true;pixelbypixel();},});const pxPerSq=document.querySelector("#pxPerSq");pxPerSq.addEventListener("change",function(e){if(this.value>50){this.value=50;}else if(this.value<2){this.value=2;}
pixelbypixel();});const greyscale=document.querySelector("#greyscale");greyscale.addEventListener("change",pixelbypixel);const lineart=document.querySelector("#lineart");lineart.addEventListener("change",pixelbypixel);const palette=document.querySelector("#palette");palette.addEventListener("change",pixelbypixel);const downloadimage=document.querySelector("#downloadimage");downloadimage.addEventListener("click",function(e){px.sI();});const flipH=document.querySelector("#flipH");flipH.addEventListener("click",function(e){px.fH();});const imageColor=document.querySelector("#imageColor");const detectedColorPalette=document.querySelector(".detected-colorpalette");imageColor.addEventListener("change",function(e){if(imageColor.checked){detectedColorPalette.classList.remove("hide");px.iC();}else{detectedColorPalette.classList.add("hide");}});const drawerToggle=document.querySelector(".drawer-toggle");const drawer=document.querySelector(".drawer");drawerToggle.addEventListener("click",function(){drawer.classList.toggle("open");drawerToggle.classList.toggle("open");});pixelbypixel();});